!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("textile",[],t):"object"==typeof exports?exports.textile=t():e.textile=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(r,a,function(t){return e[t]}.bind(null,a));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}([function(e){var t={},n=e.exports={pattern:{punct:"[!-/:-@\\[\\\\\\]-`{-~]",space:"\\s"},escape:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},collapse:function(e){return e.replace(/(?:#.*?(?:\n|$))/g,"").replace(/\s+/g,"")},expandPatterns:function(e){return e.replace(/\[:\s*(\w+)\s*:\]/g,function(t,r){var a=n.pattern[r];if(a)return n.expandPatterns(a);throw new Error("Pattern "+t+" not found in "+e)})},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},compile:function(e,r){n.isRegExp(e)&&(1===arguments.length&&(r=(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")),e=e.source);var a=e+(r||"");if(a in t)return t[a];var c=n.expandPatterns(e);return r&&/x/.test(r)&&(c=n.collapse(c)),r&&/s/.test(r)&&(c=c.replace(/([^\\])\./g,"$1[^\\0]")),r=(r||"").replace(/[^gim]/g,""),t[a]=new RegExp(c,r)}}},function(e){e.exports=function(e){var t,n=String(e),r=0,a={index:function(){return r},save:function(){return t=r,a},load:function(){return r=t,e=n.slice(r),a},advance:function(t){return r+="string"==typeof t?t.length:t,e=n.slice(r)},skipWS:function(){var t=/^\s+/.exec(e);return t?(r+=t[0].length,e=n.slice(r),t[0]):""},lookbehind:function(e){return e=null==e?1:e,n.slice(r-e,r)},startsWith:function(t){return e.substring(0,t.length)===t},slice:function(t,n){return null!=n?e.slice(t,n):e.slice(t)},valueOf:function(){return e},toString:function(){return e}};return a}},function(e,t,n){function r(e){return d.exec(e)}function a(e){return v.exec(e)}function c(e){return g.exec(e)}function s(e){return h.exec(e)}function i(e){for(var t,n={};t=f.exec(e);)n[t[1]]="string"==typeof t[2]?t[2].replace(/^(["'])(.*)\1$/,"$2"):null,e=e.slice(t[0].length);return n}function l(e,t,n){var a,l=[],o=!1,p=function(e){return o?e===o:t?e in t:!0},f={},d=0;e=u(String(e));do if((a=r(e))&&p("!"))l.push({type:S,data:a[1],pos:e.index(),src:a[0]}),e.advance(a[0]);else if((a=s(e))&&p(a[1])){var h={type:y,tag:a[1],pos:e.index(),src:a[0]};if(e.advance(a[0]),l.push(h),f[h.tag]--,d--,n&&(!d||!f[h.tag]<0||isNaN(f[h.tag])))return l;o&&(o=null)}else if((a=c(e))&&p(a[1])){var g={type:a[3]||a[1]in x?b:m,tag:a[1],pos:e.index(),src:a[0]};a[2]&&(g.attr=i(a[2])),"script"!==a[1]&&"code"!==a[1]&&"style"!==a[1]||(o=g.tag),g.type===m&&(d++,f[g.tag]=(f[g.tag]||0)+1),l.push(g),e.advance(a[0])}else a=/([^<]+|[^\0])/.exec(e),a&&l.push({type:$,data:a[0],pos:e.index(),src:a[0]}),e.advance(a?a[0].length||1:1);while(e.valueOf());return l}function o(e,t){for(var n,r=[],a=[],c=r,s=0;s<e.length;s++)if(n=e[s],n.type===S)c.push(["!",n.data]);else if(n.type===$||n.type===A)c.push(n.data);else if(n.type===b)c.push(n.attr?[n.tag,n.attr]:[n.tag]);else if(n.type===m){var i=n.attr?[n.tag,n.attr]:[n.tag];c.push(i),a.push(i),c=i}else if(n.type===y){if(a.length)for(var l=a.length-1;l>=0;l--){var o=a[l];if(o[0]===n.tag){a.splice(l),c=a[a.length-1]||r;break}}if(!a.length&&t)return r.sourceLength=n.pos+n.src.length,r}return r.sourceLength=n?n.pos+n.src.length:0,r}var p=n(0),u=n(1);p.pattern.html_id="[a-zA-Z][a-zA-Z\\d:]*",p.pattern.html_attr="(?:\"[^\"]+\"|'[^']+'|[^>\\s]+)";var f=p.compile(/^\s*([^=\s]+)(?:\s*=\s*("[^"]+"|'[^']+'|[^>\s]+))?/),d=p.compile(/^<!--(.+?)-->/,"s"),h=p.compile(/^<\/([:html_id:])([^>]*)>/),g=p.compile(/^<([:html_id:])((?:\s[^=\s/]+(?:\s*=\s*[:html_attr:])?)+)?\s*(\/?)>/),v=p.compile(/^\s*<([:html_id:](?::[a-zA-Z\d]+)*)((?:\s[^=\s/]+(?:\s*=\s*[:html_attr:])?)+)?\s*(\/?)>/),x={area:1,base:1,br:1,col:1,embed:1,hr:1,img:1,input:1,link:1,meta:1,option:1,param:1,wbr:1},m="OPEN",y="CLOSE",b="SINGLE",$="TEXT",S="COMMENT",A="WS";e.exports={singletons:x,tokenize:l,parseHtml:o,parseHtmlAttr:i,testCloseTag:s,testOpenTagBlock:a,testOpenTag:c,testComment:r}},function(e,t,n){function r(e,t){e=a(e);var n,i,o=c();do if(e.save(),e.startsWith("\r\n")&&e.advance(1),e.startsWith("\n"))e.advance(1),e.startsWith(" ")?e.advance(1):t.breaks&&o.add(["br"]),o.add("\n");else if(n=/^==(.*?)==/.exec(e))e.advance(n[0]),o.add(n[1]);else{var u=e.lookbehind(1),m=!u||/^[\s>.,"'?!;:()]$/.test(u);if((n=A.exec(e))&&(m||n[1])){e.advance(n[0]);var y=n[2],b=n[1],$=S[y],L="code"===$;(i=!L&&l(e,$,y))&&(e.advance(i[0]),i=i[1]);var E=void 0,W=void 0;if("["===b)E="^(.*?)",W="(?:])";else if("{"===b)E="^(.*?)",W="(?:})";else{var z=s.escape(y.charAt(0));E=L?"^(\\S+|\\S+.*?\\S)":"^([^\\s".concat(z,"]+|[^\\s").concat(z,"].*?\\S(").concat(z,"*))"),W="(?=$|[\\s.,\"'!?;:()«»„“”‚‘’<>])"}var M=s.compile("".concat(E,"(").concat(s.escape(y),")").concat(W));if((n=M.exec(e))&&n[1]){e.advance(n[0]),L?o.add([$,n[1]]):o.add([$,i].concat(r(n[1],t)));continue}e.load()}if((n=_.exec(e))||(n=k.exec(e))){e.advance(n[0]),i=n[1]&&l(n[1],"img");var C=i?i[1]:{src:""},H=["img",C];C.src=n[2],C.alt=n[3]?C.title=n[3]:"",n[4]&&(H=["a",{href:n[4]},H]),o.add(H)}else if(n=v(e))e.advance(n[0]),o.add(["!",n[1]]);else{if(n=x(e)){e.advance(n[0]);var Z=n[1],q=n[3]||n[1]in g,R=[Z];if(n[2]&&R.push(d(n[2])),q){o.add(R).add(e.skipWS());continue}var D=s.compile("^(.*?)(</".concat(Z,"\\s*>)"),"s");if(n=D.exec(e)){if(e.advance(n[0]),"code"===Z)R.push(n[1]);else{if("notextile"===Z){o.merge(f(h(n[1])));continue}R=R.concat(r(n[1],t))}o.add(R);continue}e.load()}if((n=P.exec(e))&&/\S/.test(u))e.advance(n[0]),o.add(["sup",{"class":"footnote",id:"fnr"+n[1]},"!"===n[2]?n[1]:["a",{href:"#fn"+n[1]},n[1]]]);else if(n=O.exec(e)){e.advance(n[0]);var F=["span",{"class":"caps"},n[1]];n[2]&&(F=["abbr",{title:n[2]},F]),o.add(F)}else if(m&&(n=j.exec(e))||(n=w.exec(e))){e.advance(n[0]);var N=n[1].match(T),I=N?n[1].slice(0,n[1].length-N[0].length):n[1];(i=l(I,"a"))?(I=I.slice(i[0]),i=i[1]):i={},N&&!I&&(I=N[0],N=""),i.href=n[2],N&&(i.title=N[1]),o.add(["a",i].concat(r(I.replace(/^(\.?\s*)/,""),t)))}else n=/([a-zA-Z0-9,.':]+|[ \f\r\t\v\xA0\u2028\u2029]+|[^\0])/.exec(e),n&&o.add(n[0]),e.advance(n?n[0].length||1:1)}}while(e.valueOf());return o.get().map(p)}var a=n(1),c=n(9),s=n(0),i=n(4),l=i.parseAttr,o=n(12),p=o.parseGlyph,u=n(2),f=u.parseHtml,d=u.parseHtmlAttr,h=u.tokenize,g=u.singletons,v=u.testComment,x=u.testOpenTag,m=n(5),y=m.ucaps,b=m.txattr,$=m.txcite;s.pattern.txattr=b,s.pattern.txcite=$,s.pattern.ucaps=y;var S={"*":"strong","**":"b","??":"cite",_:"em",__:"i","-":"del","%":"span","+":"ins","~":"sub","^":"sup","@":"code"},A=/^([[{]?)(__?|\*\*?|\?\?|[-+^~@%])/,_=s.compile(/^!(?!\s)([:txattr:](?:\.[^\n\S]|\.(?:[^./]))?)([^!\s]+?) ?(?:\(((?:[^()]|\([^()]+\))+)\))?!(?::([^\s]+?(?=[!-.:-@[\\\]-`{-~](?:$|\s)|\s|$)))?/),k=s.compile(/^\[!(?!\s)([:txattr:](?:\.[^\n\S]|\.(?:[^./]))?)([^!\s]+?) ?(?:\(((?:[^()]|\([^()]+\))+)\))?!(?::([^\s]+?(?=[!-.:-@[\\\]-`{-~](?:$|\s)|\s|$)))?\]/),O=s.compile(/^((?!TM\)|tm\))[[:ucaps:]](?:[[:ucaps:]\d]{1,}(?=\()|[[:ucaps:]\d]{2,}))(?:\((.*?)\))?(?=\W|$)/),j=s.compile(/^"(?!\s)((?:[^"]|"(?![\s:])[^\n"]+"(?!:))+)"[:txcite:]/),w=/^\["([^\n]+?)":((?:\[[a-z0-9]*\]|[^\]])+)\]/,T=/\s*\(((?:\([^()]*\)|[^()])+)\)$/,P=/^\[(\d+)(!?)\]/;t.parsePhrase=r},function(e){function t(e,t){if(e){var n={};for(var r in e)!(r in e)||t&&r in t||(n[r]=e[r]);return n}}function n(e){return/^(?:table|t[dh]|t(?:foot|head|body)|b[qc]|div|notextile|pre|h[1-6]|fn\\d+|p|###)$/.test(e)}function r(e,t,r){if(e=String(e),e&&"notextile"!==t){var x,m={},y={style:m},b=e,$=n(t),S="img"===t,A="li"===t,_=!$&&!S&&"a"!==t,k=S?l:i;do if(x=f.exec(b))x[1].split(";").forEach(function(e){var t=e.match(d);t&&(m[t[1]]=t[2])}),b=b.slice(x[0].length);else if(x=h.exec(b)){var O=b.slice(x[0].length);!O&&_||r&&r===O.slice(0,r.length)?x=null:(y.lang=x[1],b=b.slice(x[0].length))}else if(x=a.exec(b)){var j=b.slice(x[0].length);if(!j&&_||r&&(" "===j[0]||r===j.slice(0,r.length)))x=null;else{var w=x[1].split("#");w[0]&&(y["class"]=w[0]),w[1]&&(y.id=w[1]),b=j}}else{if($||A){if(x=c.exec(b)){m["padding-left"]="".concat(x[1].length,"em"),b=b.slice(x[0].length);continue}if(x=s.exec(b)){m["padding-right"]="".concat(x[1].length,"em"),b=b.slice(x[0].length);continue}}if((S||$||A)&&(x=k.exec(b))){var T=g[x[1]];S?y.align=T:m["text-align"]=T,b=b.slice(x[0].length)}else if("td"!==t&&"tr"!==t||!(x=o.exec(b))){if("td"===t){if(x=p.exec(b)){y.colspan=x[1],b=b.slice(x[0].length);continue}if(x=u.exec(b)){y.rowspan=x[1],b=b.slice(x[0].length);continue}}}else m["vertical-align"]=v[x[1]],b=b.slice(x[0].length)}while(x);var P=[];for(var L in m)P.push("".concat(L,":").concat(m[L]));return P.length?y.style=P.join(";"):delete y.style,b===e?void 0:[e.length-b.length,y]}}var a=/^\(([^()\n]+)\)/,c=/^(\(+)/,s=/^(\)+)/,i=/^(<>|<|>|=)/,l=/^(<|>|=)/,o=/^(~|\^|-)/,p=/^\\(\d+)/,u=/^\/(\d+)/,f=/^\{([^}]*)\}/,d=/^\s*([^:\s]+)\s*:\s*(.+)\s*$/,h=/^\[([^[\]\n]+)\]/,g={"<":"left","=":"center",">":"right","<>":"justify"},v={"~":"bottom","^":"top","-":"middle"};e.exports={copyAttr:t,parseAttr:r}},function(e,t){t.txblocks="(?:b[qc]|div|notextile|pre|h[1-6]|fn\\d+|p|###)",t.ucaps="A-ZÀ-ÖØ-ÞĀĂĄĆĈĊČĎĐĒĔĖĘĚĜĞĠĢĤĦĨĪĬĮİĲĴĶĹĻĽĿŁŃŅŇŊŌŎŐŒŔŖŘŚŜŞŠŢŤŦŨŪŬŮŰŲŴŶŸŹŻŽƁƂƄƆƇƉ-ƋƎ-ƑƓƔƖ-ƘƜƝƟƠƢƤƦƧƩƬƮƯƱ-ƳƵƷƸƼǄǇǊǍǏǑǓǕǗǙǛǞǠǢǤǦǨǪǬǮǱǴǶ-ǸǺǼǾȀȂȄȆȈȊȌȎȐȒȔȖȘȚȜȞȠȢȤȦȨȪȬȮȰȲȺȻȽȾɁɃ-ɆɈɊɌɎḀḂḄḆḈḊḌḎḐḒḔḖḘḚḜḞḠḢḤḦḨḪḬḮḰḲḴḶḸḺḼḾṀṂṄṆṈṊṌṎṐṒṔṖṘṚṜṞṠṢṤṦṨṪṬṮṰṲṴṶṸṺṼṾẀẂẄẆẈẊẌẎẐẒẔẞẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼẾỀỂỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪỬỮỰỲỴỶỸỺỼỾⱠⱢ-ⱤⱧⱩⱫⱭ-ⱰⱲⱵⱾⱿꜢꜤꜦꜨꜪꜬꜮꜲꜴꜶꜸꜺꜼꜾꝀꝂꝄꝆꝈꝊꝌꝎꝐꝒꝔꝖꝘꝚꝜꝞꝠꝢꝤꝦꝨꝪꝬꝮꝹꝻꝽꝾꞀꞂꞄꞆꞋꞍꞐꞒꞠꞢꞤꞦꞨꞪ",t.txcite=":((?:[^\\s()]|\\([^\\s()]+\\)|[()])+?)(?=[!-\\.:-@\\[\\\\\\]-`{-~]+(?:$|\\s)|$|\\s)";var n=t.attr_class="\\([^\\)]+\\)",r=t.attr_style="\\{[^\\}]+\\}",a=t.attr_lang="\\[[^\\[\\]]+\\]",c=t.attr_align="(?:<>|<|>|=)",s=t.attr_pad="[\\(\\)]+",i=t.txattr="(?:".concat(n,"|").concat(r,"|").concat(a,"|").concat(c,"|").concat(s,")*");t.txlisthd="[\\t ]*[\\#\\*]*(\\*|\\#(?:_|\\d+)?)".concat(i,"(?: +\\S|\\.\\s*(?=\\S|\\n))")},function(e){e.exports=function(e,t){if(t)for(var n in t)e[n]=t[n];return e}},function(e,t,n){function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return t?e.map(function(e){if(/^\n\t+/.test(e))if(0>t)e=e.slice(0,t);else for(var n=0;t>n;n++)e+="	";else if(Array.isArray(e))return a(e,t);return e}):e}function c(e,t){return e.replace(/&(?!(#\d{2,}|#x[\da-fA-F]{2,}|[a-zA-Z][a-zA-Z1-4]{1,6});)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,t?"&quot;":'"').replace(/'/g,t?"&#39;":"'")}function s(e){if(e=e.concat(),"string"==typeof e)return c(e);var t=e.shift(),n={},a="",l=[];for(e.length&&"object"===r(e[0])&&!Array.isArray(e[0])&&(n=e.shift());e.length;)l.push(s(e.shift()));for(var o in n)a+=null==n[o]?" ".concat(o):" ".concat(o,'="').concat(c(String(n[o]),!0),'"');return"!"===t?"<!--".concat(l.join(""),"-->"):t in i||t.indexOf(":")>-1&&!l.length?"<".concat(t).concat(a," />"):"<".concat(t).concat(a,">").concat(l.join(""),"</").concat(t,">")}var i=n(2).singletons;e.exports={reIndent:a,toHTML:s,escape:c}},function(e,t,n){function r(e){for(var t=1;t<(arguments.length<=1?0:arguments.length-1);t++){var n=1>t+1||arguments.length<=t+1?void 0:arguments[t+1];if(null!=n)for(var r in n)I.call(n,r)&&(e[r]=n[r])}return e}function a(e,t,n,r,a){t=t||"p";var c=[];return e.split(/(?:\r?\n){2,}/).forEach(function(e,s){"p"===t&&/^\s/.test(e)?(e=e.replace(/\r?\n[\t ]/g," ").trim(),c=c.concat(m(e,a))):(r&&s&&c.push(r),c.push(n?[t,n].concat(m(e,a)):[t].concat(m(e,a))))}),c}function c(e,t){var n,l,p=s();for(e=i(e.replace(/^( *\r?\n)+/,""));e.valueOf();)if(e.save(),l=F.exec(e))n||(n={}),e.advance(l[0]),n[l[1]]=l[2];else{if(p.linebreak(),l=C.exec(e)){e.advance(l[0]);var x=l[0],y=$(e,x);if(y&&(e.advance(y[0]),y=y[1]),l=/^\.(\.?)(?:\s|(?=:))/.exec(e)){var S=!!l[1],k=S?Z:H;if("bc"!==x&&"pre"!==x||(k=S?R:q),l=k.exec(e.advance(l[0])),e.advance(l[0]),"bq"===x){var w=l[1];(l=/^:(\S+)\s+/.exec(w))&&(y||(y={}),y.cite=l[1],w=w.slice(l[0].length));var L=a(w,"p",b(y,{cite:1,id:1}),"\n",t);p.add(["blockquote",y,"\n"].concat(L).concat(["\n"]))}else if("bc"===x){var E=y?b(y,{id:1}):null;p.add(["pre",y,E?["code",E,l[1]]:["code",l[1]]])}else if("notextile"===x)p.merge(u(f(l[1])));else if("###"===x);else if("pre"===x)p.add(["pre",y,l[1]]);else if(N.test(x)){var W=x.replace(/\D+/g,"");y||(y={}),y["class"]=(y["class"]?y["class"]+" ":"")+"footnote",y.id="fn"+W,p.add(["p",y,["a",{href:"#fnr"+W},["sup",W]]," "].concat(m(l[1],t)))}else p.merge(a(l[1],x,y,"\n",t));continue}e.load()}if(l=g(e))e.advance(l[0]+(/(?:\s*\n+)+/.exec(e)||[])[0]),p.add(["!",l[1]]);else{if(l=v(e)){var z=l[1];if(z in M)if(l[3]||z in h){if(e.advance(l[0]),/^\s*(\n|$)/.test(e)){var I=[z];l[2]&&I.push(d(l[2])),p.add(I),e.skipWS();continue}}else if("pre"===z){var G=f(e,{pre:1,code:1},z),B=u(G,!0);if(e.load().advance(B.sourceLength),/^\s*(\n|$)/.test(e)){p.merge(B),e.skipWS();continue}}else if("notextile"===z){for(var X=f(e,null,z),J=1;/^\s+$/.test(X[J].src);)J++;var K=u(X.slice(J,-1),!0),Q=X.pop();if(e.load().advance(Q.pos+Q.src.length),/^\s*(\n|$)/.test(e)){p.merge(K),e.skipWS();continue}}else{e.skipWS();for(var U=f(e,null,z),V=U.pop(),Y=1;U[Y]&&/^[\n\r]+$/.test(U[Y].src);)Y++;if(V.tag===z){var ee=U.length>1?e.slice(U[Y].pos,V.pos):"";if(e.advance(V.pos+V.src.length),/^\s*(\n|$)/.test(e)){var te=[z];if(l[2]&&te.push(d(l[2])),"script"===z||"style"===z)te.push(ee);else{var ne=ee.replace(/^\n+/,"").replace(/\s*$/,""),re=/\n\r?\n/.test(ne)||"ol"===z||"ul"===z,ae=re?c(ne,t):m(ne,r({},t,{breaks:!1}));(re||/^\n/.test(ee))&&te.push("\n"),(re||/\s$/.test(ee))&&ae.push("\n"),te=te.concat(ae)}p.add(te),e.skipWS();continue}}}e.load()}(l=D.exec(e))?(e.advance(l[0]),p.add(["hr"])):(l=A(e))?(e.advance(l[0]),p.add(_(l[0],t))):(l=O(e))?(e.advance(l[0]),p.add(j(l[0],t))):(l=T(e))?(e.advance(l[0]),p.add(P(l[1],t))):(l=H.exec(e),p.merge(a(l[1],"p",void 0,"\n",t)),e.advance(l[0]))}}return n?o(p.get(),n):p.get()}var s=n(9),i=n(1),l=n(0),o=n(11),p=n(2),u=p.parseHtml,f=p.tokenize,d=p.parseHtmlAttr,h=p.singletons,g=p.testComment,v=p.testOpenTagBlock,x=n(3),m=x.parsePhrase,y=n(4),b=y.copyAttr,$=y.parseAttr,S=n(13),A=S.testList,_=S.parseList,k=n(14),O=k.testDefList,j=k.parseDefList,w=n(15),T=w.testTable,P=w.parseTable,L=n(5),E=L.txblocks,W=L.txlisthd,z=L.txattr;l.pattern.txblocks=E,l.pattern.txlisthd=W,l.pattern.txattr=z;var M={p:0,hr:0,ul:1,ol:0,li:0,div:1,pre:0,object:1,script:0,noscript:0,blockquote:1,notextile:1},C=l.compile(/^([:txblocks:])/),H=l.compile(/^(.*?)($|\r?\n(?=[:txlisthd:])|\r?\n(?:\s*\n|$)+)/,"s"),Z=l.compile(/^(.*?)($|\r?\n(?=[:txlisthd:])|\r?\n+(?=[:txblocks:][:txattr:]\.))/,"s"),q=l.compile(/^(.*?)($|\r?\n(?:\s*\n|$)+)/,"s"),R=l.compile(/^(.*?)($|\r?\n+(?=[:txblocks:][:txattr:]\.))/,"s"),D=/^(---+|\*\*\*+|___+)(\r?\n\s+|$)/,F=l.compile(/^\[([^\]]+)\]((?:https?:\/\/|\/)\S+)(?:\s*\n|$)/),N=/^fn\d+$/,I=Object.prototype.hasOwnProperty;t.parseFlow=c},function(e){e.exports=function(e){var t=Array.isArray(e)?e:[];return{add:function(e){return"string"==typeof e&&"string"==typeof t[t.length-1]?t[t.length-1]+=e:Array.isArray(e)?t.push(e.filter(function(e){return void 0!==e})):e&&t.push(e),this},merge:function(e){for(var t=0,n=e.length;n>t;t++)this.add(e[t]);return this},linebreak:function(){t.length&&this.add("\n")},get:function(){return t}}}},function(e,t,n){function r(e,t){return t=a(a({},r.defaults),t||{}),l(e,t).map(s).join("")}var a=n(6),c=n(7),s=c.toHTML,i=n(8),l=i.parseFlow,o=n(2),p=o.parseHtml;e.exports=r,r.defaults={breaks:!0},r.setOptions=r.setoptions=function(e){return a(r.defaults,e),this},r.parse=r.convert=r,r.html_parser=p,r.jsonml=function(e,t){return t=a(a({},r.defaults),t||{}),["html"].concat(l(e,t))},r.serialize=s},function(e){function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function n(e,r){if(Array.isArray(e)){if("a"===e[0]){var a=e[1];"object"===t(a)&&"href"in a&&a.href in r&&(a.href=r[a.href])}for(var c=0,s=e.length;s>c;c++)Array.isArray(e[c])&&n(e[c],r)}return e}},function(e,t,n){var r=n(0),a=/(\w)'(\w)/g,c=/([^-]|^)->/,s=r.compile(/([^\s[(])"(?=$|\s|[:punct:])/g),i=r.compile(/([^\s[(])'(?=$|\s|[:punct:])/g),l=/(\b ?|\s|^)(?:\(C\)|\[C\])/gi,o=/([\d.,]+['"]? ?)x( ?)(?=[\d.,]['"]?)/g,p=r.compile(/(\d*[.,]?\d+)"(?=\s|$|[:punct:])/g),u=/([^.]?)\.{3}/g,f=/(^|[\s\w])--([\s\w]|$)/g,d=/ - /g,h=/"/g,g=/'/g,v=/(\b ?|\s|^)(?:\(R\)|\[R\])/gi,x=r.compile(/(\d*[.,]?\d+)'(?=\s|$|[:punct:])/g),m=/(\b ?|\s|^)(?:\((?:TM|tm)\)|\[(?:TM|tm)\])/g;t.parseGlyph=function(e){return"string"!=typeof e?e:e.replace(c,"$1&#8594;").replace(o,"$1&#215;$2").replace(u,"$1&#8230;").replace(f,"$1&#8212;$2").replace(d," &#8211; ").replace(m,"$1&#8482;").replace(v,"$1&#174;").replace(l,"$1&#169;").replace(p,"$1&#8243;").replace(s,"$1&#8221;").replace(h,"&#8220;").replace(x,"$1&#8242;").replace(a,"$1&#8217;$2").replace(i,"$1&#8217;").replace(g,"&#8216;").replace(/[([]1\/4[\])]/,"&#188;").replace(/[([]1\/2[\])]/,"&#189;").replace(/[([]3\/4[\])]/,"&#190;").replace(/[([]o[\])]/,"&#176;").replace(/[([]\+\/-[\])]/,"&#177;")}},function(e,t,n){function r(e){for(var t="\n";e--;)t+="	";return t}function a(e){return g.exec(e)}function c(e,t){e=s(e.replace(/(^|\r?\n)[\t ]+/,"$1"));for(var n,a,c,i,o=[],u={},d=t._lst||{},h=0;a=v.exec(e);){var g=["li"],x=a[1].length,m="#"===a[1].substr(-1)?"ol":"ul",y=null,b=void 0,$=void 0,S=void 0,A=void 0;if((c=/^(_|\d+)/.exec(a[2]))&&(h=isFinite(c[1])?parseInt(c[1],10):d[x]||u[x]||1,a[2]=a[2].slice(c[1].length)),(S=p(a[2],"li"))&&(a[2]=a[2].slice(S[0]),S=S[1]),/^\.\s*$/.test(a[2]))n=S||{},e.advance(a[0]);else{for(;o.length<x;)b=[m,{},r(o.length+1),y=["li"]],$=o[o.length-1],$&&($.li.push(r(o.length)),$.li.push(b)),o.push({ul:b,li:y,att:0}),u[o.length]=1;for(;o.length>x;)A=o.pop(),A.ul.push(r(o.length)),1!==A.att||A.ul[3][1].substr||l(A.ul[1],A.ul[3].splice(1,1)[0]);$=o[o.length-1],h&&($.ul[1].start=h,u[x]=h,h=0),n&&($.att=9,l($.ul[1],n),n=null),y||($.ul.push(r(o.length),g),$.li=g),S&&($.li.push(S),$.att++),Array.prototype.push.apply($.li,f(a[2].trim(),t)),e.advance(a[0]),u[x]=(u[x]||0)+1}}for(t._lst=u;o.length;)i=o.pop(),i.ul.push(r(o.length)),1!==i.att||i.ul[3][1].substr||l(i.ul[1],i.ul[3].splice(1,1)[0]);return i.ul}var s=n(1),i=n(0),l=n(6),o=n(4),p=o.parseAttr,u=n(3),f=u.parsePhrase,d=n(5),h=d.txlisthd;i.pattern.txlisthd=h;var g=i.compile(/^((?:[:txlisthd:][^\0]*?(?:\r?\n|$))+)(\s*\n|$)/,"s"),v=i.compile(/^([#*]+)([^\0]+?)(\n(?=[:txlisthd:])|$)/,"s");e.exports={testList:a,parseList:c}},function(e,t,n){function r(e){return s.exec(e)}function a(e,t){e=c(e.trim());for(var r,a,s,l=n(3).parsePhrase,o=n(8).parseFlow,p=["dl","\n"];s=i.exec(e);){for(r=s[1].split(/(?:^|\n)- /).slice(1);r.length;)p.push("	",["dt"].concat(l(r.shift().trim(),t)),"\n");a=s[2].trim(),p.push("	",["dd"].concat(/=:$/.test(a)?o(a.slice(0,-2).trim(),t):l(a,t)),"\n"),e.advance(s[0])}return p}var c=n(1),s=/^((?:- (?:[^\n]\n?)+?)+:=(?: *\n[^\0]+?=:(?:\n|$)|(?:[^\0]+?(?:$|\n(?=\n|- )))))+/,i=/^((?:- (?:[^\n]\n?)+?)+):=( *\n[^\0]+?=:\s*(?:\n|$)|(?:[^\0]+?(?:$|\n(?=\n|- ))))/;t.testDefList=r,t.parseDefList=a},function(e,t,n){function r(e){var t=["colgroup",{}];return e.split("|").forEach(function(e,n){var r,a=n?{}:t[1],c=e.trim();c&&((r=/^\\(\d+)/.exec(c))&&(a.span=+r[1],c=c.slice(r[0].length)),(r=p(c,"col"))&&(i(a,r[1]),c=c.slice(r[0])),(r=/\b\d+\b/.exec(c))&&(a.width=+r[0])),n&&t.push("\n		",["col",a])}),t.concat(["\n	"])}function a(e){return x.exec(e)}function c(e,t){e=l(e.trim());var n,a,c,s,o,u,d,g,v=[],x={},_=0,k=function(e,t){c=[e,t||{}],v.push(c)};(g=m.exec(e))&&(e.advance(g[0]),u=p(g[2],"table"),u&&i(x,u[1]),g[3]&&(x.summary=g[3])),(g=b.exec(e))&&(a=["caption"],(u=p(g[1],"caption"))&&(a.push(u[1]),g[1]=g[1].slice(u[0])),/\./.test(g[1])?(a.push(g[1].slice(1).replace(/\|\s*$/,"").trim()),_++,e.advance(g[0])):a=null);do{if(g=$.exec(e))n=r(g[1]),_++;else if(g=S.exec(e)){var O=A[g[1]]||"tbody";u=p("".concat(g[2]," "),O),k(O,u&&u[1]),_++}else if(g=y.exec(e)){c||k("tbody"),s=["tr"],g[2]&&(u=p(g[2],"tr"))&&s.push(u[1]),c.push("\n		",s),o=l(g[3]);do{o.save();var j=o.startsWith("_"),w=[j?"th":"td"];if(j&&o.advance(1),u=p(o,"td"),u&&(o.advance(u[0]),w.push(u[1])),u||j){var T=/^\.\s*/.exec(o);T?o.advance(T[0]):(w=["td"],o.load())}var P=/^(==.*?==|[^|])*/.exec(o);w=w.concat(f(P[0],t)),s.push("\n			",w),d="|"===o.valueOf().charAt(P[0].length),o.advance(P[0].length+1)}while(d);s.push("\n		")}g&&e.advance(g[0])}while(g);var L=["table",x];return _?(a&&L.push("\n	",a),n&&L.push("\n	",n),v.forEach(function(e){L.push("\n	",e.concat(["\n	"]))})):L=L.concat(h(v[0].slice(2),-1)),L.push("\n"),L}var s=n(0),i=n(6),l=n(1),o=n(4),p=o.parseAttr,u=n(3),f=u.parsePhrase,d=n(7),h=d.reIndent,g=n(5),v=g.txattr;s.pattern.txattr=v;var x=s.compile(/^((?:table[:txattr:]\.(?:\s(.+?))\s*\n)?(?:(?:[:txattr:]\.[^\n\S]*)?\|.*?\|[^\n\S]*(?:\n|$))+)([^\n\S]*\n)?/,"s"),m=/^table(_?)([^\n]*?)\.(?:[ \t](.+?))?\s*\n/,y=s.compile(/^(?:\|([~^-][:txattr:])\.\s*\n)?([:txattr:]\.[^\n\S]*)?\|(.*?)\|[^\n\S]*(\n|$)/,"s"),b=/^\|=([^\n+]*)\n/,$=/^\|:([^\n+]*)\|[\r\t ]*\n/,S=/^\|([\^\-~])([^\n+]*)\.[ \t\r]*\n/,A={"^":"thead","~":"tfoot","-":"tbody"};e.exports={parseColgroup:r,parseTable:c,testTable:a}}])});
